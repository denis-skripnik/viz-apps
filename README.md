# viz-apps
 Apps for Viz blockchain

## Список
1. Telegram бот @viz_awards_bot;
2. Telegram бот viz_committee_bot;
3. Telegram бот readdle_bot: чтение постов в readdle.me, а также публикация постов-заметок.
4. viz-top - рейтинги по балансам.
5. viz-price - выводит информацию о ценах Viz.
6. witness_rewards - сервис выводит список делегатов Viz с их наградами за текущий и предыдущий день, текущий и предыдущий месяц.
7. links - сервис viz-links [репозиторий](https://github.com/denis-skripnik/viz-links), [статья](https://viz.media/viz-links/).
Если кратко, позволяет добавлять ссылки через награды к committee и искать по ним с точным и неточным совпадением.
8. votes - опросы в блокчейне Viz.
9. Watchdog - бот, уведомляющий об активации / деактивации делегатов и пропусках ими блоков.

Всё в js_modules.

## А также там же
- api.js - файл с viz-api приложений
- helpers.js - различные функции, например, перевод даты в красивую строку и т.д.
- methods.js - методы отправки данных к БЧ. Некоторые функции просто их вызывают с возвратом данных, а некоторые выполняют некую обработку.

## В viz.js
Производится парсинг блоков и вызов методов приложений в зависимости от операции. Также ниже вызываются методы, которые необходимо запускать сразу, либо по cron.

## В config.json
Все настройки: Нода,, подписка для большего количества запросов, а также конфигурация приложений.

## В databases
Файлы с методами работы с базой данных Mongo DB. Зависят от приложений.
Если в приложении используется больше одного файла базы данных (1 файл = одна коллекция), они размещаются в поддериктории databases.

## Установка
1. Скопировать на сервер
2. Переход в папку проекта.
3. npm install
4. Изменение параметров в config.json
provider_account - аккаунт, который создал подписку в Viz блокчейне для получения возможности делать больше запросов,
authTrueLimiter - это сколько одновременных запросов может сделать пользователь, если активировал подписку и подтвердил авторизацию, authFalseLimiter - сколько одновременных запросов могут сделать неавторизованные пользователиб
В votes меняем to - кому, а также vote_price - сумму создания опроса;
В awards_bot заменяем THIS_ADD_awards_bot_API_TOKEN на его Api токен и вместо 123456789 ваши админские Telegram id;
У readdle_bot заменяем THIS_ADD_readdle_bot_API_TOKEN на его api токен, а также 123456789 на ваши Telegram id админов;
mg_bot: THIS_ADD_mg_bot_API_TOKEN на его api токен, 123456789 на ваши админские Telegram id, THIS_ADD_ACCOUNT на логин аккаунта награждающего за активность, THIS_ADD_REGULAR_KEY на его регулярный ключ (начинается с 5);
В committee_bot THIS_ADD_committee_bot_API_TOKEN на api токен его, 123456789 на ваш Telegram id (указывается в единственном числе);
У chats_channels_bot заменяем THIS_ADD_chats_channels_bot_API_TOKEN на его api токен;
У watchdog THIS_ADD_WATCHDOG_API_TOKEN на его api токен и 123456789 на Telegram id админа;
В viz-projects указываем логин и сумму, которая требуется для добавления проекта
5. Запуск:
node viz.js или pm2 start viz.js